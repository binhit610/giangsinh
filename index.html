<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hộp Quà 3D</title>
    <link rel="stylesheet" href="./style/style.css" />
  </head>

  <body>
    <!-- NHẠC -->
    <audio id="bgm" src="./style/chrismats.mp3.mp3" loop></audio>

    <canvas class="webgl"></canvas>

    <!-- SHADER -->
    <script type="x-shader/x-vertex" id="vertexshaderCandle">
      void main() {
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      }
    </script>

    <script type="x-shader/x-fragment" id="fragmentshaderCandle">
      uniform float time; 
      uniform float colorSpeed;
      uniform float delay; 
      uniform vec3 baseColor;
      uniform vec3 finalColor;
      varying vec2 vUv;

      void main() {
        float animatedTime = time - delay;
        animatedTime = mod(animatedTime, colorSpeed);
        float mixFactor = animatedTime / colorSpeed;

        vec3 mixedColor = mix(baseColor, finalColor, mixFactor);
        gl_FragColor = vec4(mixedColor, 1.0);
      }
    </script>

    <!-- MODULE 3D -->
    <script type="module" src="./style/module.js"></script>

    <!-- CLICK LÀ PHÁT NHẠC -->
    <script>
      document.body.addEventListener("mousedown", function () {
        const audio = document.getElementById("bgm");
        audio.play().catch(() => {});
      });
    </script>
  </body>
</html>
